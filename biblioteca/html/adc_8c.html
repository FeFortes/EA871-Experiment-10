<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>biblioteca: Sources/adc.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">biblioteca
   &#160;<span id="projectnumber">v1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('adc_8c.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">adc.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;adc.h&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aafada63d95e5d97945daad1ac50c5322"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="adc_8c.html#aafada63d95e5d97945daad1ac50c5322">initADC0</a> (uint8_t div4, <a class="el" href="struct___a_d_c_configuracao.html">ADCConfig</a> *config)</td></tr>
<tr class="separator:aafada63d95e5d97945daad1ac50c5322"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0a84eefc6a91d28d32956d80cd7d82f3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="adc_8c.html#a0a84eefc6a91d28d32956d80cd7d82f3">calibraADC0</a> (void)</td></tr>
<tr class="memdesc:a0a84eefc6a91d28d32956d80cd7d82f3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calibra o m&oacute;dulo ADC "Prior to calibration, the user must configure the ADC's clock source and frequency, low power configuration, voltage reference selection, sample time, and high speed configuration according to the application's clock source availability and needs." (Se&ccedil;&atilde;o 28.4.6 de KL-25 Sub-Family Reference Manual)  <a href="#a0a84eefc6a91d28d32956d80cd7d82f3">More...</a><br /></td></tr>
<tr class="separator:a0a84eefc6a91d28d32956d80cd7d82f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5a80785d8b981640f1f63236b3dababa"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="adc_8c.html#a5a80785d8b981640f1f63236b3dababa">configuraADC0</a> (uint8_t div4, <a class="el" href="struct___a_d_c_configuracao.html">ADCConfig</a> *config)</td></tr>
<tr class="separator:a5a80785d8b981640f1f63236b3dababa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0527d9a675c1e7099c705c02aafb8b7b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="adc_8c.html#a0527d9a675c1e7099c705c02aafb8b7b">selecionaTriggerADC0</a> (<a class="el" href="struct___a_d_c_configuracao.html">ADCConfig</a> *config)</td></tr>
<tr class="memdesc:a0527d9a675c1e7099c705c02aafb8b7b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Seleciona o tipoe a fonte do trigger deconvers&atilde;o.  <a href="#a0527d9a675c1e7099c705c02aafb8b7b">More...</a><br /></td></tr>
<tr class="separator:a0527d9a675c1e7099c705c02aafb8b7b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae1634af9274947e503d42b75df6f0fc3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="adc_8c.html#ae1634af9274947e503d42b75df6f0fc3">enableInterrupADC0</a> (void)</td></tr>
<tr class="memdesc:ae1634af9274947e503d42b75df6f0fc3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Habilita interrup&ccedil;&atilde;o de convers&atilde;o completa do ADC.  <a href="#ae1634af9274947e503d42b75df6f0fc3">More...</a><br /></td></tr>
<tr class="separator:ae1634af9274947e503d42b75df6f0fc3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab72265535f629b009fa6bb2d703bf21b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="adc_8c.html#ab72265535f629b009fa6bb2d703bf21b">disableInterrupADC0</a> (void)</td></tr>
<tr class="memdesc:ab72265535f629b009fa6bb2d703bf21b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Habilita interrup&ccedil;&atilde;o de convers&atilde;o completa do ADC.  <a href="#ab72265535f629b009fa6bb2d703bf21b">More...</a><br /></td></tr>
<tr class="separator:ab72265535f629b009fa6bb2d703bf21b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4924201ce69df0ad2f5c4b823a2e1d49"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="adc_8c.html#a4924201ce69df0ad2f5c4b823a2e1d49">selecionaCanalADC0</a> (uint8_t x)</td></tr>
<tr class="memdesc:a4924201ce69df0ad2f5c4b823a2e1d49"><td class="mdescLeft">&#160;</td><td class="mdescRight">Seleciona o canal de entrada. Consulte <a href="ftp://ftp.dca.fee.unicamp.br/pub/docs/ea871/ARM/KL25P80M48SF0RM.pdf#page=464">Manual</a>  <a href="#a4924201ce69df0ad2f5c4b823a2e1d49">More...</a><br /></td></tr>
<tr class="separator:a4924201ce69df0ad2f5c4b823a2e1d49"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><dl class="section date"><dt>Date</dt><dd>Aug 7, 2017 </dd></dl>
<dl class="section author"><dt>Author</dt><dd>Ting </dd></dl>
</div><h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a0a84eefc6a91d28d32956d80cd7d82f3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void calibraADC0 </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Calibra o m&oacute;dulo ADC "Prior to calibration, the user must configure the ADC's clock source and frequency, low power configuration, voltage reference selection, sample time, and high speed configuration according to the application's clock source availability and needs." (Se&ccedil;&atilde;o 28.4.6 de KL-25 Sub-Family Reference Manual) </p>
<p>&lt; habilita clock do m&oacute;dulo ADC0</p>
<p>Configura&ccedil;&atilde;o do rel&oacute;gio Os bits de ADC0_CFG1 s&atilde;o resetados em 0: ADLSMP=0 (short sample time)</p>
<p>&lt; opera&ccedil;&atilde;o normal</p>
<p>&lt; ADCK = (source clock)/8</p>
<p>&lt; intervalo de amostragem longo</p>
<p>&lt; convers&atilde;o em 16 bits</p>
<p>&lt; (source clock) = (bus clock)/2</p>
<p>Configura&ccedil;&atilde;o dos ciclos adicionais Os bits de ADC0_CFG2 s&atilde;o resetados em 0: MUXSEL = 0 (canais ADxxa)</p>
<p>&lt; desabilita a sa&iacute;da do sinal de clock</p>
<p>&lt; 24 (20 extra+4) ADCK ciclos por amostra</p>
<p>&lt; sequ&ecirc;ncia de convers&atilde;o em alta velocidade com 2 ciclos adicionais</p>
<p>Os bits de ADC0_SC2 s&atilde;o resetados em 0: ACFE=0 (desabilitada fun&ccedil;&atilde;o de compara&ccedil;&atilde;o)</p>
<p>&lt; Tens&otilde;es de refer&ecirc; VREFH e VREFL</p>
<p>Os bits de ADC0_SC3 s&atilde;o resetados em 0</p>
<p>&lt; habilita fun&ccedil;&atilde;o em hardware</p>
<p>&lt; n&uacute;mero de amostras por m&eacute;dia = 32</p>
<p>&lt; inicializa a calibra&ccedil;&atilde;o</p>
<p>Gere as corre&ccedil;&otilde;es de erros de ganhos, conforme o procedimento na Se&ccedil;&atilde;o 28.4.6</p>
<p>&lt; soma PS</p>
<p>&lt; divide por 2</p>
<p>&lt; set o bit mais significativo</p>
<p>&lt; plus-side gain</p>
<p>Somente &uacute;til para modos diferenciais</p>
<p>&lt; soma PS</p>
<p>&lt; divide por 2</p>
<p>&lt; set o bit mais significativo</p>
<p>&lt; minus side gain </p>

</div>
</div>
<a class="anchor" id="a5a80785d8b981640f1f63236b3dababa"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void configuraADC0 </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>div4</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct___a_d_c_configuracao.html">ADCConfig</a> *&#160;</td>
          <td class="paramname"><em>config</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Configura&ccedil;&atilde;o de SIM</p>
<p>Modo unipolar ou diferencial</p>
<p>Opera&ccedil;&atilde;o em baixa pot&ecirc;ncia</p>
<p>Intervalo de amostragem</p>
<p>&lt; intervalo de amostragem longo</p>
<p>ADLSTS=00 (24 ciclos)</p>
<p>&lt; setar o novo intervalo de amostragem</p>
<p>&lt; intervalo de amostragem curto</p>
<p>Resolu&ccedil;&atilde;o de convers&atilde;o</p>
<p>&lt; zera o campo</p>
<p>&lt; seta a resolu&ccedil;&atilde;o</p>
<p>Base de tempo do ADCK = (bus clock)/2*8</p>
<p>&lt; seleciona clock</p>
<p>&lt; seleciona divisor do clock</p>
<p>Configura&ccedil;&atilde;o da velocidade: MUXSEL=0 (canais ADxxa) Canais entre 4 a 7 tem dois canais associados A e B Sele&ccedil;&atilde;o do canal (A==0 ou B==1)</p>
<p>&lt; Canal B</p>
<p>&lt; Canal A</p>
<p>&lt; desabilitar sada do sinal de rel&oacute;gio</p>
<p>&lt; sequ&ecirc;ncia de convers&atilde;o normal</p>
<p>Desabilita fun&ccedil;&otilde;es de compara&ccedil;&atilde;o e DMA</p>
<p>Seleciona os sinais dos pinos VREFH e VREFL como sinais de refer&ecirc;ncia</p>
<p>Modo de convers&atilde;o: cont&iacute;nuo ou unitário</p>
<p>Habilita c&ocirc;mputo da m&eacute;dia das amostras</p>
<p>&lt; Disabilita o m&oacute;dulo </p>

</div>
</div>
<a class="anchor" id="ab72265535f629b009fa6bb2d703bf21b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void disableInterrupADC0 </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Habilita interrup&ccedil;&atilde;o de convers&atilde;o completa do ADC. </p>
<p>ADC0_SC1A: COCO=0, DIFF=0 (medida unipolar) e ADCH=0b11111 (canais desabilitados) no reset</p>
<p>&lt; habilita interrup&ccedil;&atilde;o </p>

</div>
</div>
<a class="anchor" id="ae1634af9274947e503d42b75df6f0fc3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void enableInterrupADC0 </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Habilita interrup&ccedil;&atilde;o de convers&atilde;o completa do ADC. </p>
<p>ADC0_SC1A: COCO=0, DIFF=0 (medida unipolar) e ADCH=0b11111 (canais desabilitados) no reset</p>
<p>&lt; habilita interrup&ccedil;&atilde;o </p>

</div>
</div>
<a class="anchor" id="aafada63d95e5d97945daad1ac50c5322"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void initADC0 </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>div4</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct___a_d_c_configuracao.html">ADCConfig</a> *&#160;</td>
          <td class="paramname"><em>config</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>&lt; calibra ADC</p>
<p>&lt; configura modo de opera&ccedil;&atilde;o do ADC </p>

</div>
</div>
<a class="anchor" id="a4924201ce69df0ad2f5c4b823a2e1d49"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void selecionaCanalADC0 </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>x</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Seleciona o canal de entrada. Consulte <a href="ftp://ftp.dca.fee.unicamp.br/pub/docs/ea871/ARM/KL25P80M48SF0RM.pdf#page=464">Manual</a> </p>
<p>&lt; zera o campo ADCH (~ADCH=0b11111)</p>
<p>&lt; AD9 selecionado (PTB1) </p>

</div>
</div>
<a class="anchor" id="a0527d9a675c1e7099c705c02aafb8b7b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void selecionaTriggerADC0 </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct___a_d_c_configuracao.html">ADCConfig</a> *&#160;</td>
          <td class="paramname"><em>config</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Seleciona o tipoe a fonte do trigger deconvers&atilde;o. </p>
<p>Disparo para convers&atilde;o</p>
<p>Trigger alternativo</p>
<p>Pre-trigger</p>
<p>&lt; B</p>
<p>&lt; A</p>
<p>PIT/TPM/RTC/LPTMR0</p>
<p>&lt; zerar o campo</p>
<p>&lt; setar a fonte</p>
<p>&lt; A &lt;- TPM1_CH0; B &lt;- TPM1_CH1</p>
<p>&lt; disparo por hardware</p>
<p>&lt; disparo por software </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_937900b87e0c7a5fa01190c395fb83f7.html">Sources</a></li><li class="navelem"><a class="el" href="adc_8c.html">adc.c</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
